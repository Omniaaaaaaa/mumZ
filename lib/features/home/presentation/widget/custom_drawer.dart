import 'package:flutter/material.dart';
import 'package:mamyapp/features/home/presentation/widget/drower_item.dart';

class CustomDrawer extends StatelessWidget {
  final String userName;
  final int selectedIndex;
  final Function(int) onItemTap;

  const CustomDrawer({
    super.key,
    required this.userName,
    required this.selectedIndex,
    required this.onItemTap,
  });

  @override
  Widget build(BuildContext context) {
    return Drawer(
      backgroundColor: Colors.white,
      child: Column(
        children: [
          // Header with user info
          Container(
            width: double.infinity,
            padding: const EdgeInsets.fromLTRB(20, 60, 20, 30),
            decoration: const BoxDecoration(
              gradient: LinearGradient(
                colors: [Color(0xFFFFDAB9), Color(0xFFFFCBA4)],
                begin: Alignment.topCenter,
                end: Alignment.bottomCenter,
              ),
            ),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.end,
              children: [
                const CircleAvatar(
                  radius: 35,
                  backgroundImage: AssetImage('assets/images/baby.png'),
                ),
                const SizedBox(height: 12),
                Text(
                  'مرحبا، $userName',
                  textAlign: TextAlign.right,
                  style: const TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                    color: Color(0xFF5D4E37),
                  ),
                ),
              ],
            ),
          ),
          // Menu Items
          Expanded(
            child: ListView(
              padding: EdgeInsets.zero,
              children: [
                _buildDrawerSection(
                  'الرئيسية',
                  [
                    DrawerItem(
                      icon: Icons.home,
                      title: 'الصفحة الرئيسية',
                      isSelected: selectedIndex == 0,
                      onTap: () => onItemTap(0),
                    ),
                  ],
                ),
                const Divider(height: 1),
                _buildDrawerSection(
                  'حساب الطفل',
                  [
                    DrawerItem(
                      icon: Icons.child_care,
                      title: 'حساب الطفل و تعديل البيانات',
                      isSelected: false,
                      onTap: () {},
                    ),
                  ],
                ),
                const Divider(height: 1),
                _buildDrawerSection(
                  'مُفضلتك',
                  [
                    DrawerItem(
                      icon: Icons.favorite_border,
                      title: 'مكتبه القصص',
                      isSelected: false,
                    onTap: () {},
                    ),
                    DrawerItem(
                      icon: Icons.message,
                      title: 'سجل المحادثات',
                      isSelected: false,
                      onTap: () {},
                    ),
                    DrawerItem(
                      icon: Icons.child_friendly,
                      title: 'سجل تحليل البكاء',
                      isSelected: false,
                      onTap: () {},
                    ),
                  ],
                ),
                const Divider(height: 1),
                _buildDrawerSection(
                  'الخصوصية والدعم',
                  [
                    DrawerItem(
                      icon: Icons.privacy_tip,
                      title: 'الخصوصية',
                      isSelected: false,
                      onTap: () {},
                    ),

                    DrawerItem(
                      icon: Icons.help,
                      title: 'الأسئلة الشائعة',
                      isSelected: false,
                      onTap: () {},
                    ),
                  ],
                ),
                const Divider(height: 1),
                _buildDrawerSection(
                  'عن التطبيق',
                  [
                    DrawerItem(
                      icon: Icons.info,
                      title: 'حول التطبيق',
                      isSelected: false,
                      onTap: () {},
                    ),
                  ],
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildDrawerSection(String title, List<Widget> items) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.end,
      children: [
        Padding(
          padding: const EdgeInsets.fromLTRB(20, 16, 20, 8),
          child: Text(
            title,
            textAlign: TextAlign.right,
            style: const TextStyle(
              fontSize: 14,
              fontWeight: FontWeight.bold,
              color: Color(0xFF333333),
            ),
          ),
        ),
        ...items,
      ],
    );
  }
}
